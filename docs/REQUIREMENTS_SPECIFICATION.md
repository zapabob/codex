# ğŸ“‹ zapabob/codex æ©Ÿèƒ½è¦ä»¶å®šç¾©æ›¸

**æ–‡æ›¸ç•ªå·**: REQ-SPEC-001  
**ä½œæˆæ—¥**: 2025-10-11 JST  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
**å¯¾è±¡ã‚·ã‚¹ãƒ†ãƒ **: zapabob/codex v0.47.0-alpha.1  
**å¯¾è±¡æ©Ÿèƒ½**: ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ©Ÿæ§‹ & Deep Researchæ©Ÿèƒ½

---

## ğŸ“‘ æ–‡æ›¸ç®¡ç†

| é …ç›® | å†…å®¹ |
|------|------|
| **æ–‡æ›¸å** | ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ & Deep Research æ©Ÿèƒ½è¦ä»¶å®šç¾©æ›¸ |
| **æ–‡æ›¸ID** | REQ-SPEC-001 |
| **ä½œæˆè€…** | zapabob/codex Development Team |
| **æ‰¿èªè€…** | Project Lead |
| **é…å¸ƒå…ˆ** | é–‹ç™ºãƒãƒ¼ãƒ ã€QAã€é–¢é€£éƒ¨é–€ |
| **æ©Ÿå¯†åŒºåˆ†** | ç¤¾å¤–ç§˜ |

### å¤‰æ›´å±¥æ­´

| ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | æ—¥ä»˜ | å¤‰æ›´å†…å®¹ | å¤‰æ›´è€… |
|-----------|------|---------|--------|
| 1.0.0 | 2025-10-11 | åˆç‰ˆä½œæˆ | zapabob |

---

## ğŸ“– ç›®æ¬¡

1. [ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦](#1-ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦)
2. [ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦](#2-ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦)
3. [æ©Ÿèƒ½è¦ä»¶](#3-æ©Ÿèƒ½è¦ä»¶)
4. [éæ©Ÿèƒ½è¦ä»¶](#4-éæ©Ÿèƒ½è¦ä»¶)
5. [ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ](#5-ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ)
6. [APIä»•æ§˜](#6-apiä»•æ§˜)
7. [ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«](#7-ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«)
8. [ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹](#8-ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹)
9. [ãƒ†ã‚¹ãƒˆè¦ä»¶](#9-ãƒ†ã‚¹ãƒˆè¦ä»¶)
10. [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶](#10-ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶)
11. [ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶](#11-ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶)
12. [é‹ç”¨è¦ä»¶](#12-é‹ç”¨è¦ä»¶)
13. [åˆ¶ç´„äº‹é …](#13-åˆ¶ç´„äº‹é …)
14. [ç”¨èªé›†](#14-ç”¨èªé›†)

---

## 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### 1.1 èƒŒæ™¯

OpenAI/codexã¯å¼·åŠ›ãªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ã‚ã‚‹ãŒã€ä»¥ä¸‹ã®èª²é¡ŒãŒå­˜åœ¨ã™ã‚‹ï¼š

1. **å°‚é–€ã‚¿ã‚¹ã‚¯ã®åŠ¹ç‡æ€§**: å˜ä¸€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã§ã¯å¤šæ§˜ãªå°‚é–€ã‚¿ã‚¹ã‚¯ã«å¯¾å¿œã—ãã‚Œãªã„
2. **æƒ…å ±åé›†èƒ½åŠ›**: Webæ¤œç´¢æ©Ÿèƒ½ãŒé™å®šçš„
3. **ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£**: å¤§è¦æ¨¡ã‚¿ã‚¹ã‚¯ã‚’åˆ†å‰²ã—ã¦ä¸¦åˆ—å®Ÿè¡Œã§ããªã„
4. **ã‚³ã‚¹ãƒˆ**: å¤–éƒ¨APIä¾å­˜ã§ã‚³ã‚¹ãƒˆå¢—åŠ 

### 1.2 ç›®çš„

zapabob/codexã¯ã€OpenAI/codexã‚’æ‹¡å¼µã—ã€ä»¥ä¸‹ã‚’å®Ÿç¾ã™ã‚‹ï¼š

1. **ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ©Ÿæ§‹**: å°‚é–€ã‚¿ã‚¹ã‚¯ã‚’è‡ªå¾‹çš„ã«å®Ÿè¡Œã™ã‚‹ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ 
2. **Deep Researchæ©Ÿèƒ½**: å¤šæ®µéšæ¢ç´¢ãƒ»çŸ›ç›¾æ¤œå‡ºãƒ»å¼•ç”¨ç®¡ç†ã‚’å‚™ãˆãŸé«˜åº¦ãªæƒ…å ±åé›†æ©Ÿèƒ½
3. **ã‚³ã‚¹ãƒˆæœ€é©åŒ–**: APIã‚­ãƒ¼ä¸è¦ãªDuckDuckGoçµ±åˆã«ã‚ˆã‚Š$0é‹ç”¨ã‚’å®Ÿç¾

### 1.3 ã‚¹ã‚³ãƒ¼ãƒ—

#### å¯¾è±¡ç¯„å›²ï¼ˆIn Scopeï¼‰

```
âœ… ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ©Ÿæ§‹
   - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©ï¼ˆYAMLï¼‰
   - ã‚¿ã‚¹ã‚¯å§”è­²ã‚·ã‚¹ãƒ†ãƒ 
   - æ¨©é™ç®¡ç†
   - ãƒˆãƒ¼ã‚¯ãƒ³ãƒã‚¸ã‚§ãƒƒãƒˆç®¡ç†

âœ… Deep Researchæ©Ÿèƒ½
   - Webæ¤œç´¢ï¼ˆDuckDuckGo, Brave, Google, Bingï¼‰
   - å¤šæ®µéšæ¢ç´¢
   - çŸ›ç›¾æ¤œå‡º
   - å¼•ç”¨ç®¡ç†
   - ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ

âœ… CLIæ‹¡å¼µ
   - codex delegate ã‚³ãƒãƒ³ãƒ‰
   - codex research ã‚³ãƒãƒ³ãƒ‰
```

#### å¯¾è±¡å¤–ï¼ˆOut of Scopeï¼‰

```
âŒ GUIå®Ÿè£…ï¼ˆPhase 2ä»¥é™ï¼‰
âŒ ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒª
âŒ å•†ç”¨APIã‚µãƒ¼ãƒ“ã‚¹åŒ–
âŒ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚³ãƒ©ãƒœãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
```

### 1.4 ã‚¹ãƒ†ãƒ¼ã‚¯ãƒ›ãƒ«ãƒ€ãƒ¼

| å½¹å‰² | æ‹…å½“è€…/çµ„ç¹” | è²¬ä»» |
|------|-----------|------|
| **ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚ªãƒ¼ãƒŠãƒ¼** | zapabob | è¦ä»¶å®šç¾©ã€å„ªå…ˆåº¦æ±ºå®š |
| **é–‹ç™ºãƒªãƒ¼ãƒ‰** | zapabob | å®Ÿè£…çµ±æ‹¬ã€æŠ€è¡“åˆ¤æ–­ |
| **QAãƒªãƒ¼ãƒ‰** | Community | ãƒ†ã‚¹ãƒˆè¨ˆç”»ã€å“è³ªä¿è¨¼ |
| **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä»£è¡¨** | Early Adopters | ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã€å—å…¥ãƒ†ã‚¹ãƒˆ |

---

## 2. ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### 2.1 ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      zapabob/codex                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  CLI Interface   â”‚         â”‚   TUI Interface  â”‚         â”‚
â”‚  â”‚  - delegate cmd  â”‚         â”‚   - Agent UI     â”‚         â”‚
â”‚  â”‚  - research cmd  â”‚         â”‚   - Search UI    â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚           â”‚                            â”‚                    â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                        â”‚                                    â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚           â”‚    Core Engine (Rust)      â”‚                    â”‚
â”‚           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚
â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                    â”‚
â”‚           â”‚  â”‚ Agent Runtime        â”‚  â”‚                    â”‚
â”‚           â”‚  â”‚ - Task Executor      â”‚  â”‚                    â”‚
â”‚           â”‚  â”‚ - Budget Manager     â”‚  â”‚                    â”‚
â”‚           â”‚  â”‚ - Permission Checker â”‚  â”‚                    â”‚
â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                    â”‚
â”‚           â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                    â”‚
â”‚           â”‚  â”‚ Research Engine      â”‚  â”‚                    â”‚
â”‚           â”‚  â”‚ - Search Provider    â”‚  â”‚                    â”‚
â”‚           â”‚  â”‚ - Query Planner      â”‚  â”‚                    â”‚
â”‚           â”‚  â”‚ - Contradiction Det. â”‚  â”‚                    â”‚
â”‚           â”‚  â”‚ - Report Generator   â”‚  â”‚                    â”‚
â”‚           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                    â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                        â”‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚               â”‚               â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
    â”‚ Agent   â”‚    â”‚  Web    â”‚    â”‚  MCP    â”‚
    â”‚ Configs â”‚    â”‚ Search  â”‚    â”‚ Tools   â”‚
    â”‚ (.yaml) â”‚    â”‚ APIs    â”‚    â”‚         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ã‚·ã‚¹ãƒ†ãƒ å¢ƒç•Œ

#### å†…éƒ¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- CLI/TUIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
- Agent Runtimeï¼ˆã‚¿ã‚¹ã‚¯å®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³ï¼‰
- Research Engineï¼ˆæƒ…å ±åé›†ã‚¨ãƒ³ã‚¸ãƒ³ï¼‰
- æ¨©é™ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
- ãƒã‚¸ã‚§ãƒƒãƒˆç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 

#### å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ é€£æº
- Webæ¤œç´¢APIï¼ˆDuckDuckGo, Brave, Google, Bingï¼‰
- MCPã‚µãƒ¼ãƒãƒ¼ï¼ˆãƒ„ãƒ¼ãƒ«çµ±åˆï¼‰
- OpenAI APIï¼ˆLLMå®Ÿè¡Œï¼‰
- Gitï¼ˆãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ï¼‰

---

## 3. æ©Ÿèƒ½è¦ä»¶

### 3.1 ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ©Ÿæ§‹

#### FR-SA-001: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©

**å„ªå…ˆåº¦**: ğŸ”´ Critical  
**å®Ÿè£…çŠ¶æ³**: âœ… å®Œäº†

**è¦ä»¶**:
- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©ã‚’YAMLå½¢å¼ã§è¨˜è¿°å¯èƒ½ã§ã‚ã‚‹ã“ã¨
- å®šç¾©é …ç›®: name, goal, max_tokens, permissions, tools, constraints
- `.codex/agents/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã«é…ç½®

**å—å…¥åŸºæº–**:
```yaml
# .codex/agents/code-reviewer.yaml
name: "Code Reviewer"
goal: "å¤šè¨€èªå¯¾å¿œã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼"
max_tokens: 40000
permissions:
  file_read: ["./src", "./tests"]
  file_write: []
  shell: false
  network: false
tools:
  - "ast_analyzer"
  - "linter"
constraints:
  - "unsafe ã‚³ãƒ¼ãƒ‰ç¦æ­¢"
  - "unwrap() ç¦æ­¢"
```

---

#### FR-SA-002: delegate ã‚³ãƒãƒ³ãƒ‰

**å„ªå…ˆåº¦**: ğŸ”´ Critical  
**å®Ÿè£…çŠ¶æ³**: âœ… å®Œäº†ï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰

**è¦ä»¶**:
```bash
codex delegate <agent> [options]

ã‚ªãƒ—ã‚·ãƒ§ãƒ³:
  --scope <path>      # å¯¾è±¡ã‚¹ã‚³ãƒ¼ãƒ—
  --goal <string>     # ç›®æ¨™ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
  --budget <number>   # ãƒˆãƒ¼ã‚¯ãƒ³ä¸Šé™
  --deadline <secs>   # å®Ÿè¡Œæ™‚é–“åˆ¶é™
  --out <path>        # çµæœå‡ºåŠ›å…ˆ
```

**å—å…¥åŸºæº–**:
- ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã§ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆèµ·å‹•
- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©èª­ã¿è¾¼ã¿æˆåŠŸ
- ã‚¿ã‚¹ã‚¯å®Ÿè¡Œï¼ˆç¾çŠ¶ã¯ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰
- çµæœè¡¨ç¤ºï¼ˆstatus, tokens_used, duration, artifactsï¼‰

---

#### FR-SA-003: Agent Runtime

**å„ªå…ˆåº¦**: ğŸ”´ Critical  
**å®Ÿè£…çŠ¶æ³**: ğŸš§ æœªå®Ÿè£…ï¼ˆPhase 2ï¼‰

**è¦ä»¶**:
- ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å®Ÿè¡Œç’°å¢ƒã‚’æä¾›
- ãƒˆãƒ¼ã‚¯ãƒ³ãƒã‚¸ã‚§ãƒƒãƒˆç®¡ç†
- æ¨©é™ãƒã‚§ãƒƒã‚¯
- ã‚¿ã‚¹ã‚¯å®Ÿè¡Œãƒ»ç›£è¦–
- çµæœé›†ç´„

**ãƒ‡ãƒ¼ã‚¿æ§‹é€ **:
```rust
pub struct AgentRuntime {
    pub agent_def: AgentDefinition,
    pub budget: TokenBudget,
    pub permissions: PermissionSet,
    pub executor: TaskExecutor,
}

impl AgentRuntime {
    pub async fn execute_task(
        &self,
        goal: &str,
        inputs: &HashMap<String, String>,
    ) -> Result<AgentExecutionResult>;
}
```

**å—å…¥åŸºæº–**:
- [ ] AgentRuntimeã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç”Ÿæˆ
- [ ] ãƒˆãƒ¼ã‚¯ãƒ³ãƒã‚¸ã‚§ãƒƒãƒˆç®¡ç†ï¼ˆæ®‹é‡ãƒã‚§ãƒƒã‚¯ï¼‰
- [ ] æ¨©é™ãƒã‚§ãƒƒã‚¯ï¼ˆfile/shell/networkï¼‰
- [ ] ã‚¿ã‚¹ã‚¯å®Ÿè¡Œ
- [ ] çµæœè¿”å´ï¼ˆstatus, tokens, artifactsï¼‰

---

#### FR-SA-004: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç¨®é¡

**å„ªå…ˆåº¦**: ğŸ”´ Critical  
**å®Ÿè£…çŠ¶æ³**: âœ… å®Œäº†ï¼ˆå®šç¾©ã®ã¿ï¼‰

**è¦ä»¶**:
ä»¥ä¸‹7ç¨®é¡ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æä¾›ï¼š

| ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ | ç”¨é€” | å®Ÿè£…çŠ¶æ³ |
|-------------|------|---------|
| **code-reviewer** | ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆ4è¨€èªå¯¾å¿œï¼‰ | âœ… YAMLå®šç¾©æ¸ˆã¿ |
| **ts-reviewer** | TypeScriptå°‚ç”¨ãƒ¬ãƒ“ãƒ¥ãƒ¼ | âœ… YAMLå®šç¾©æ¸ˆã¿ |
| **python-reviewer** | Pythonå°‚ç”¨ãƒ¬ãƒ“ãƒ¥ãƒ¼ | âœ… YAMLå®šç¾©æ¸ˆã¿ |
| **unity-reviewer** | Unity C#å°‚ç”¨ãƒ¬ãƒ“ãƒ¥ãƒ¼ | âœ… YAMLå®šç¾©æ¸ˆã¿ |
| **test-gen** | ãƒ†ã‚¹ãƒˆç”Ÿæˆ | âœ… YAMLå®šç¾©æ¸ˆã¿ |
| **sec-audit** | ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ» | âœ… YAMLå®šç¾©æ¸ˆã¿ |
| **researcher** | Deep Researchå®Ÿè¡Œ | âœ… YAMLå®šç¾©æ¸ˆã¿ |

---

#### FR-SA-005: æ¨©é™ç®¡ç†

**å„ªå…ˆåº¦**: ğŸ”´ Critical  
**å®Ÿè£…çŠ¶æ³**: ğŸš§ è¨­è¨ˆæ¸ˆã¿ï¼ˆå®Ÿè£…å¾…ã¡ï¼‰

**è¦ä»¶**:
```rust
pub struct PermissionSet {
    pub file_read: FilePermission,
    pub file_write: FilePermission,
    pub shell: ShellPermission,
    pub network: NetworkPermission,
    pub mcp_tools: Vec<String>,
}

pub enum FilePermission {
    None,
    ReadOnly(Vec<PathBuf>),
    ReadWrite(Vec<PathBuf>),
    Restricted(Vec<PathBuf>),
}
```

**å—å…¥åŸºæº–**:
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿å–ã‚Šæ¨©é™ãƒã‚§ãƒƒã‚¯
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«æ›¸ãè¾¼ã¿æ¨©é™ãƒã‚§ãƒƒã‚¯
- [ ] ã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œæ¨©é™ãƒã‚§ãƒƒã‚¯
- [ ] ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãƒã‚§ãƒƒã‚¯
- [ ] æ¨©é™é•åæ™‚ã«ã‚¨ãƒ©ãƒ¼è¿”å´
- [ ] ç›£æŸ»ãƒ­ã‚°è¨˜éŒ²

---

#### FR-SA-006: ãƒˆãƒ¼ã‚¯ãƒ³ãƒã‚¸ã‚§ãƒƒãƒˆç®¡ç†

**å„ªå…ˆåº¦**: ğŸŸ¡ High  
**å®Ÿè£…çŠ¶æ³**: ğŸš§ è¨­è¨ˆæ¸ˆã¿ï¼ˆå®Ÿè£…å¾…ã¡ï¼‰

**è¦ä»¶**:
```rust
pub struct TokenBudget {
    pub total: usize,
    pub used: usize,
    pub reserved: usize,
}

impl TokenBudget {
    pub fn check_available(&self, required: usize) -> bool;
    pub fn consume(&mut self, amount: usize) -> Result<()>;
    pub fn release(&mut self, amount: usize);
    pub fn remaining(&self) -> usize;
}
```

**å—å…¥åŸºæº–**:
- [ ] ãƒã‚¸ã‚§ãƒƒãƒˆåˆæœŸåŒ–ï¼ˆmax_tokensï¼‰
- [ ] ä½¿ç”¨é‡ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°
- [ ] æ®‹é‡ãƒã‚§ãƒƒã‚¯
- [ ] è¶…éæ™‚ã«ã‚¨ãƒ©ãƒ¼è¿”å´
- [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ®‹é‡è¡¨ç¤º

---

### 3.2 Deep Researchæ©Ÿèƒ½

#### FR-DR-001: research ã‚³ãƒãƒ³ãƒ‰

**å„ªå…ˆåº¦**: ğŸ”´ Critical  
**å®Ÿè£…çŠ¶æ³**: âœ… å®Œäº†

**è¦ä»¶**:
```bash
codex research "<query>" [options]

ã‚ªãƒ—ã‚·ãƒ§ãƒ³:
  --depth <1-5>       # æ¢ç´¢æ·±åº¦ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1ï¼‰
  --breadth <1-10>    # å¹…ï¼ˆã‚µãƒ–ã‚¯ã‚¨ãƒªæ•°ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 3ï¼‰
  --strategy <type>   # æˆ¦ç•¥ï¼ˆcomprehensive|quick|deepï¼‰
  --budget <tokens>   # ãƒˆãƒ¼ã‚¯ãƒ³ä¸Šé™
  --out <path>        # ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›å…ˆ
```

**å—å…¥åŸºæº–**:
- âœ… ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã§ç ”ç©¶é–‹å§‹
- âœ… æ¢ç´¢æ·±åº¦ãƒ»å¹…ã®æŒ‡å®š
- âœ… ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆãƒ»è¡¨ç¤º
- âœ… å¼•ç”¨ä»˜ãçµæœ

---

#### FR-DR-002: Webæ¤œç´¢çµ±åˆ

**å„ªå…ˆåº¦**: ğŸ”´ Critical  
**å®Ÿè£…çŠ¶æ³**: âœ… å®Œäº†

**è¦ä»¶**:
è¤‡æ•°ã®æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã‚’ã‚µãƒãƒ¼ãƒˆï¼š

| æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ | APIã‚­ãƒ¼ | å„ªå…ˆåº¦ | å®Ÿè£…çŠ¶æ³ |
|------------|--------|--------|---------|
| **DuckDuckGo** | ä¸è¦ | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ | âœ… å®Œäº† |
| **Brave Search** | å¿…è¦ | é«˜ | ğŸš§ æœªå®Ÿè£… |
| **Google Custom** | å¿…è¦ | ä¸­ | ğŸš§ æœªå®Ÿè£… |
| **Bing Search** | å¿…è¦ | ä½ | ğŸš§ æœªå®Ÿè£… |

**ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒã‚§ãƒ¼ãƒ³**:
```
1. Brave Search (APIã‚­ãƒ¼ã‚ã‚Œã°)
2. Google Custom Search (APIã‚­ãƒ¼ã‚ã‚Œã°)
3. Bing Search (APIã‚­ãƒ¼ã‚ã‚Œã°)
4. DuckDuckGo HTMLã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ï¼ˆãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰
```

**å—å…¥åŸºæº–**:
- âœ… DuckDuckGo HTMLã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°å‹•ä½œ
- âœ… URLãƒ‡ã‚³ãƒ¼ãƒ‰ï¼ˆãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆè§£æ±ºï¼‰
- âœ… 202ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
- [ ] Brave Search APIçµ±åˆ
- [ ] Google Custom Search APIçµ±åˆ

---

#### FR-DR-003: å¤šæ®µéšæ¢ç´¢

**å„ªå…ˆåº¦**: ğŸ”´ Critical  
**å®Ÿè£…çŠ¶æ³**: âœ… å®Œäº†ï¼ˆåŸºæœ¬å®Ÿè£…ï¼‰

**è¦ä»¶**:
```rust
pub struct ResearchPlanner {
    pub max_depth: usize,
    pub breadth_per_level: usize,
    pub strategy: ResearchStrategy,
}

// æ¢ç´¢æˆ¦ç•¥
pub enum ResearchStrategy {
    Comprehensive,  // åŒ…æ‹¬çš„ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
    Quick,          // é«˜é€Ÿ
    Deep,           // æ·±æ˜ã‚Š
}
```

**å—å…¥åŸºæº–**:
- âœ… ã‚µãƒ–ã‚¯ã‚¨ãƒªç”Ÿæˆ
- âœ… æ·±åº¦å„ªå…ˆ/å¹…å„ªå…ˆæ¢ç´¢
- âœ… æˆ¦ç•¥é¸æŠï¼ˆcomprehensive/quick/deepï¼‰
- [ ] ã‚¹ãƒãƒ¼ãƒˆã‚µãƒ–ã‚¯ã‚¨ãƒªç”Ÿæˆï¼ˆæ”¹å–„å¿…è¦ï¼‰

---

#### FR-DR-004: çŸ›ç›¾æ¤œå‡º

**å„ªå…ˆåº¦**: ğŸŸ¡ High  
**å®Ÿè£…çŠ¶æ³**: âœ… å®Œäº†

**è¦ä»¶**:
- è¤‡æ•°ã‚½ãƒ¼ã‚¹ã‹ã‚‰ã®æƒ…å ±ã‚’æ¯”è¼ƒ
- çŸ›ç›¾ã™ã‚‹æƒ…å ±ã‚’æ¤œå‡º
- ä¿¡é ¼æ€§ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è­¦å‘Šè¡¨ç¤º

**ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ **:
```rust
pub struct ContradictionChecker {
    pub threshold: f64,
}

impl ContradictionChecker {
    pub fn detect_contradictions(
        &self,
        sources: &[Source],
    ) -> Vec<Contradiction>;
}
```

**å—å…¥åŸºæº–**:
- âœ… çŸ›ç›¾æ¤œå‡ºæ©Ÿèƒ½å®Ÿè£…
- âœ… çŸ›ç›¾ã‚«ã‚¦ãƒ³ãƒˆè¡¨ç¤º
- [ ] è©³ç´°ãªçŸ›ç›¾ãƒ¬ãƒãƒ¼ãƒˆï¼ˆæ”¹å–„å¿…è¦ï¼‰

---

#### FR-DR-005: å¼•ç”¨ç®¡ç†

**å„ªå…ˆåº¦**: ğŸŸ¡ High  
**å®Ÿè£…çŠ¶æ³**: âœ… å®Œäº†

**è¦ä»¶**:
- ã™ã¹ã¦ã®æƒ…å ±æºã«URLå¼•ç”¨
- å¼•ç”¨å½¢å¼ã®çµ±ä¸€
- å¼•ç”¨æ¤œè¨¼ï¼ˆURLåˆ°é”æ€§ï¼‰
- å¼•ç”¨ç•ªå·è‡ªå‹•æ¡ç•ª

**ãƒ‡ãƒ¼ã‚¿æ§‹é€ **:
```rust
pub struct Source {
    pub title: String,
    pub url: String,
    pub snippet: String,
    pub relevance_score: f64,
    pub retrieved_at: DateTime<Utc>,
}
```

**å—å…¥åŸºæº–**:
- âœ… å¼•ç”¨ä»˜ããƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
- âœ… URLè¡¨ç¤º
- âœ… ä¿¡é ¼æ€§ã‚¹ã‚³ã‚¢è¡¨ç¤º
- [ ] URLåˆ°é”æ€§æ¤œè¨¼ï¼ˆæœªå®Ÿè£…ï¼‰

---

#### FR-DR-006: ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ

**å„ªå…ˆåº¦**: ğŸ”´ Critical  
**å®Ÿè£…çŠ¶æ³**: âœ… å®Œäº†

**è¦ä»¶**:
- Markdownå½¢å¼ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
- æ§‹é€ åŒ–ã•ã‚ŒãŸæƒ…å ±æ•´ç†
- å¼•ç”¨ãƒªã‚¹ãƒˆè‡ªå‹•ç”Ÿæˆ
- ã‚µãƒãƒªãƒ¼ç”Ÿæˆ

**ãƒ¬ãƒãƒ¼ãƒˆæ§‹æˆ**:
```markdown
# Research Report: <ã‚¯ã‚¨ãƒª>

## ğŸ“Š Summary
- Query: <ã‚¯ã‚¨ãƒª>
- Strategy: <æˆ¦ç•¥>
- Depth: <æ·±åº¦>
- Sources: <ã‚½ãƒ¼ã‚¹æ•°>
- Confidence: <ä¿¡é ¼åº¦>

## ğŸ” Findings
[ä¸»è¦ãªç™ºè¦‹]

## ğŸ“š Sources
[å¼•ç”¨ãƒªã‚¹ãƒˆ]

## âš ï¸ Contradictions
[çŸ›ç›¾æƒ…å ±]
```

**å—å…¥åŸºæº–**:
- âœ… Markdownãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
- âœ… æ§‹é€ åŒ–ã•ã‚ŒãŸæƒ…å ±
- âœ… å¼•ç”¨ãƒªã‚¹ãƒˆ
- âœ… çŸ›ç›¾æƒ…å ±è¡¨ç¤º

---

### 3.3 å…±é€šæ©Ÿèƒ½

#### FR-CM-001: å¯¾è©±ãƒ¢ãƒ¼ãƒ‰çµ±åˆ

**å„ªå…ˆåº¦**: ğŸŸ¡ High  
**å®Ÿè£…çŠ¶æ³**: ğŸš§ æœªå®Ÿè£…

**è¦ä»¶**:
```bash
$ codex

# ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‘¼ã³å‡ºã—
> @code-reviewer ./src

# Deep Researchå‘¼ã³å‡ºã—
> @researcher "Rust async patterns"
```

**å—å…¥åŸºæº–**:
- [ ] @code-reviewer ã‚¨ã‚¤ãƒªã‚¢ã‚¹
- [ ] @researcher ã‚¨ã‚¤ãƒªã‚¢ã‚¹
- [ ] ãã®ä»–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¨ã‚¤ãƒªã‚¢ã‚¹

---

#### FR-CM-002: MCPãƒ„ãƒ¼ãƒ«çµ±åˆ

**å„ªå…ˆåº¦**: ğŸŸ¡ High  
**å®Ÿè£…çŠ¶æ³**: ğŸš§ éƒ¨åˆ†å®Ÿè£…

**è¦ä»¶**:
- MCPã‚µãƒ¼ãƒãƒ¼çµŒç”±ã§ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—
- ãƒ„ãƒ¼ãƒ«ãƒªã‚¹ãƒˆå–å¾—
- ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ
- çµæœå–å¾—

**ã‚µãƒãƒ¼ãƒˆãƒ„ãƒ¼ãƒ«**:
- ASTè§£æ
- Linterå®Ÿè¡Œ
- Language Serverçµ±åˆ
- Gitæ“ä½œ

---

#### FR-CM-003: ãƒ­ã‚°ãƒ»ç›£æŸ»

**å„ªå…ˆåº¦**: ğŸŸ¡ High  
**å®Ÿè£…çŠ¶æ³**: ğŸš§ éƒ¨åˆ†å®Ÿè£…

**è¦ä»¶**:
- ã™ã¹ã¦ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œã‚’ãƒ­ã‚°è¨˜éŒ²
- ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡è¨˜éŒ²
- æ¨©é™ãƒã‚§ãƒƒã‚¯çµæœè¨˜éŒ²
- ã‚¨ãƒ©ãƒ¼è©³ç´°è¨˜éŒ²

**ãƒ­ã‚°å½¢å¼**:
```json
{
  "timestamp": "2025-10-11T18:00:00Z",
  "agent": "code-reviewer",
  "goal": "Review ./src",
  "tokens_used": 12000,
  "duration_secs": 45.2,
  "status": "success",
  "artifacts": ["artifacts/code-review.md"]
}
```

---

## 4. éæ©Ÿèƒ½è¦ä»¶

### 4.1 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶

#### NFR-PF-001: å¿œç­”æ™‚é–“

| æ©Ÿèƒ½ | ç›®æ¨™ | è¨±å®¹ |
|------|------|------|
| **delegateèµ·å‹•** | < 1ç§’ | < 3ç§’ |
| **researchï¼ˆdepth=1ï¼‰** | < 5ç§’ | < 10ç§’ |
| **researchï¼ˆdepth=3ï¼‰** | < 30ç§’ | < 60ç§’ |
| **ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©èª­ã¿è¾¼ã¿** | < 100ms | < 500ms |

---

#### NFR-PF-002: ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆ

| æ©Ÿèƒ½ | ç›®æ¨™ | è¨±å®¹ |
|------|------|------|
| **åŒæ™‚ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œ** | 5å€‹ | 3å€‹ |
| **Webæ¤œç´¢ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ç§’** | 10 | 5 |

---

#### NFR-PF-003: ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨é‡

| ãƒªã‚½ãƒ¼ã‚¹ | ç›®æ¨™ | ä¸Šé™ |
|---------|------|------|
| **ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡** | < 500MB | < 1GB |
| **CPUä½¿ç”¨ç‡** | < 50% | < 80% |
| **ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨é‡** | < 100MB | < 500MB |

---

### 4.2 ä¿¡é ¼æ€§è¦ä»¶

#### NFR-RL-001: å¯ç”¨æ€§

- **ç›®æ¨™**: 99.9%ï¼ˆæœˆé–“ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ  < 43åˆ†ï¼‰
- **è¨±å®¹**: 99.0%ï¼ˆæœˆé–“ãƒ€ã‚¦ãƒ³ã‚¿ã‚¤ãƒ  < 7æ™‚é–“ï¼‰

---

#### NFR-RL-002: ã‚¨ãƒ©ãƒ¼å‡¦ç†

```
âœ… ã™ã¹ã¦ã®ã‚¨ãƒ©ãƒ¼ã‚’ã‚­ãƒ£ãƒƒãƒ
âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
âœ… ã‚¨ãƒ©ãƒ¼è©³ç´°ãƒ­ã‚°è¨˜éŒ²
âœ… è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤ï¼ˆé©åˆ‡ãªå ´åˆï¼‰
âœ… ã‚°ãƒ¬ãƒ¼ã‚¹ãƒ•ãƒ«ãƒ‡ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
```

**ä¾‹**:
- DuckDuckGo 202ã‚¨ãƒ©ãƒ¼ â†’ ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè¡Œ
- APIã‚­ãƒ¼ä¸è¶³ â†’ ç„¡æ–™æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ä½¿ç”¨
- ãƒˆãƒ¼ã‚¯ãƒ³ä¸Šé™åˆ°é” â†’ ä¸€æ™‚åœæ­¢ãƒ»è­¦å‘Š

---

#### NFR-RL-003: ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§

```
âœ… ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†
âœ… ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½
âœ… ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»ãƒªã‚«ãƒãƒª
âœ… ãƒ‡ãƒ¼ã‚¿æ¤œè¨¼
```

---

### 4.3 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶

#### NFR-SC-001: èªè¨¼ãƒ»èªå¯

```
âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ï¼ˆOpenAI APIçµŒç”±ï¼‰
âœ… ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ¨©é™ãƒã‚§ãƒƒã‚¯
âœ… ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™
âœ… ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™
```

---

#### NFR-SC-002: ãƒ‡ãƒ¼ã‚¿ä¿è­·

```
âœ… APIã‚­ãƒ¼æš—å·åŒ–ä¿å­˜
âœ… ãƒ­ã‚°æ©Ÿå¯†æƒ…å ±ãƒã‚¹ã‚¯
âœ… ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«è‡ªå‹•å‰Šé™¤
âœ… HTTPSé€šä¿¡å¼·åˆ¶
```

---

#### NFR-SC-003: ç›£æŸ»è¨¼è·¡

```
âœ… ã™ã¹ã¦ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œè¨˜éŒ²
âœ… æ¨©é™ãƒã‚§ãƒƒã‚¯çµæœè¨˜éŒ²
âœ… ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ã‚¯ã‚»ã‚¹è¨˜éŒ²
âœ… ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¯ã‚»ã‚¹è¨˜éŒ²
```

---

### 4.4 ä¿å®ˆæ€§è¦ä»¶

#### NFR-MT-001: ã‚³ãƒ¼ãƒ‰å“è³ª

```
âœ… Clippyè­¦å‘Šã‚¼ãƒ­
âœ… unwrap()ç¦æ­¢ï¼ˆãƒ†ã‚¹ãƒˆä»¥å¤–ï¼‰
âœ… unsafeç¦æ­¢ï¼ˆæ­£å½“ç†ç”±ãªã—ï¼‰
âœ… ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸ > 70%
âœ… ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå……å®Ÿ
```

---

#### NFR-MT-002: æ‹¡å¼µæ€§

```
âœ… æ–°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¿½åŠ å®¹æ˜“
âœ… æ–°æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³çµ±åˆå®¹æ˜“
âœ… ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æ©Ÿæ§‹
âœ… MCPçµ±åˆ
```

---

### 4.5 é‹ç”¨æ€§è¦ä»¶

#### NFR-OP-001: ãƒ­ã‚°ãƒ»ç›£è¦–

```
âœ… æ§‹é€ åŒ–ãƒ­ã‚°ï¼ˆJSONï¼‰
âœ… ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«åˆ¶å¾¡
âœ… ãƒ­ã‚°ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
âœ… ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†
```

---

#### NFR-OP-002: ãƒ‡ãƒ—ãƒ­ã‚¤

```
âœ… ãƒ¯ãƒ³ã‚³ãƒãƒ³ãƒ‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
âœ… ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†
âœ… ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½
âœ… CI/CDçµ±åˆ
```

---

## 5. ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

### 5.1 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
zapabob/codex/
â”œâ”€â”€ .codex/
â”‚   â”œâ”€â”€ agents/                    # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©
â”‚   â”‚   â”œâ”€â”€ code-reviewer.yaml
â”‚   â”‚   â”œâ”€â”€ test-gen.yaml
â”‚   â”‚   â””â”€â”€ ... (7ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ)
â”‚   â”œâ”€â”€ config.toml                # ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®š
â”‚   â””â”€â”€ META_PROMPT_CONTINUOUS_IMPROVEMENT.md
â”‚
â”œâ”€â”€ codex-rs/                      # Rustå®Ÿè£…
â”‚   â”œâ”€â”€ core/                      # ã‚³ã‚¢ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ agent_runtime.rs  # AgentRuntimeï¼ˆæœªå®Ÿè£…ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ permissions.rs    # æ¨©é™ç®¡ç†ï¼ˆæœªå®Ÿè£…ï¼‰
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â””â”€â”€ Cargo.toml
â”‚   â”‚
â”‚   â”œâ”€â”€ deep-research/             # Deep Research
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ lib.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ web_search_provider.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ url_decoder.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ planner.rs
â”‚   â”‚   â”‚   â”œâ”€â”€ contradiction.rs
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â””â”€â”€ Cargo.toml
â”‚   â”‚
â”‚   â””â”€â”€ cli/                       # CLIå®Ÿè£…
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ main.rs
â”‚       â”‚   â”œâ”€â”€ delegate_cmd.rs
â”‚       â”‚   â”œâ”€â”€ research_cmd.rs
â”‚       â”‚   â””â”€â”€ ...
â”‚       â””â”€â”€ Cargo.toml
â”‚
â”œâ”€â”€ docs/                          # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ REQUIREMENTS_SPECIFICATION.md  # ã“ã®æ–‡æ›¸
â”‚   â”œâ”€â”€ codex-subagents-deep-research.md
â”‚   â””â”€â”€ ...
â”‚
â””â”€â”€ _docs/                         # å®Ÿè£…ãƒ­ã‚°
    â”œâ”€â”€ 2025-10-11_å…¨æ©Ÿèƒ½å®Œå…¨å®Ÿè£…å®Œäº†å ±å‘Š.md
    â””â”€â”€ ...
```

---

### 5.2 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰

| æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|------|----------|------|
| **Rust** | 1.75+ | ã‚³ã‚¢å®Ÿè£… |
| **Tokio** | 1.35+ | éåŒæœŸãƒ©ãƒ³ã‚¿ã‚¤ãƒ  |
| **reqwest** | 0.11+ | HTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ |
| **serde** | 1.0+ | ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³ |
| **anyhow** | 1.0+ | ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚° |
| **scraper** | 0.18+ | HTML ãƒ‘ãƒ¼ã‚¹ |

#### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰

| æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç”¨é€” |
|------|----------|------|
| **Ratatui** | 0.25+ | TUI |
| **Crossterm** | 0.27+ | ã‚¿ãƒ¼ãƒŸãƒŠãƒ«åˆ¶å¾¡ |

#### å¤–éƒ¨API

| ã‚µãƒ¼ãƒ“ã‚¹ | ç”¨é€” | APIã‚­ãƒ¼ |
|---------|------|--------|
| **DuckDuckGo** | Webæ¤œç´¢ | ä¸è¦ |
| **Brave Search** | Webæ¤œç´¢ | å¿…è¦ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ |
| **Google Custom Search** | Webæ¤œç´¢ | å¿…è¦ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰ |
| **OpenAI API** | LLMå®Ÿè¡Œ | å¿…è¦ |

---

## 6. APIä»•æ§˜

### 6.1 CLI API

#### 6.1.1 codex delegate

```bash
codex delegate <agent> [OPTIONS]

Arguments:
  <agent>    ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåï¼ˆä¾‹: code-reviewerï¼‰

Options:
  --scope <PATH>       å¯¾è±¡ã‚¹ã‚³ãƒ¼ãƒ—
  --goal <STRING>      ç›®æ¨™ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
  --budget <NUMBER>    ãƒˆãƒ¼ã‚¯ãƒ³ä¸Šé™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 40000ï¼‰
  --deadline <NUMBER>  å®Ÿè¡Œæ™‚é–“åˆ¶é™ï¼ˆç§’ï¼‰
  --out <PATH>         çµæœå‡ºåŠ›å…ˆ

Exit Codes:
  0: æˆåŠŸ
  1: ã‚¨ãƒ©ãƒ¼
  2: ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
  3: ãƒˆãƒ¼ã‚¯ãƒ³ä¸Šé™åˆ°é”
```

**ä¾‹**:
```bash
# åŸºæœ¬çš„ãªä½¿ã„æ–¹
codex delegate code-reviewer --scope ./src

# ãƒˆãƒ¼ã‚¯ãƒ³ä¸Šé™æŒ‡å®š
codex delegate test-gen --scope ./src/api --budget 20000

# çµæœã‚’ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›
codex delegate sec-audit --scope ./backend --out audit-report.json
```

---

#### 6.1.2 codex research

```bash
codex research "<query>" [OPTIONS]

Arguments:
  <query>    æ¤œç´¢ã‚¯ã‚¨ãƒª

Options:
  --depth <1-5>          æ¢ç´¢æ·±åº¦ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1ï¼‰
  --breadth <1-10>       å¹…ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 3ï¼‰
  --strategy <TYPE>      æˆ¦ç•¥ï¼ˆcomprehensive|quick|deepï¼‰
  --budget <NUMBER>      ãƒˆãƒ¼ã‚¯ãƒ³ä¸Šé™ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 60000ï¼‰
  --out <PATH>           ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›å…ˆ

Exit Codes:
  0: æˆåŠŸ
  1: ã‚¨ãƒ©ãƒ¼
  2: ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
  3: ãƒˆãƒ¼ã‚¯ãƒ³ä¸Šé™åˆ°é”
```

**ä¾‹**:
```bash
# åŸºæœ¬çš„ãªä½¿ã„æ–¹
codex research "Rust async programming"

# æ·±æ˜ã‚Šèª¿æŸ»
codex research "React Server Components" --depth 3 --breadth 5

# ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›
codex research "Python FastAPI" --out research-report.md
```

---

### 6.2 Rust API

#### 6.2.1 AgentRuntime

```rust
use codex_core::agent_runtime::AgentRuntime;

// AgentRuntimeåˆæœŸåŒ–
let runtime = AgentRuntime::new(
    agent_definition,  // AgentDefinition
    budget,            // TokenBudget
    permissions,       // PermissionSet
)?;

// ã‚¿ã‚¹ã‚¯å®Ÿè¡Œ
let result = runtime.execute_task(
    "Review code for best practices",  // goal
    &inputs,                            // HashMap<String, String>
).await?;

// çµæœå–å¾—
println!("Status: {:?}", result.status);
println!("Tokens used: {}", result.tokens_used);
println!("Duration: {:.2}s", result.duration_secs);
```

---

#### 6.2.2 ResearchProvider

```rust
use codex_deep_research::WebSearchProvider;

// ProvideråˆæœŸåŒ–
let provider = WebSearchProvider::new();

// æ¤œç´¢å®Ÿè¡Œ
let sources = provider.search("Rust async", 10).await?;

// ã‚½ãƒ¼ã‚¹å‡¦ç†
for source in sources {
    println!("Title: {}", source.title);
    println!("URL: {}", source.url);
    println!("Relevance: {:.2}", source.relevance_score);
}
```

---

## 7. ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«

### 7.1 ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©

```yaml
# .codex/agents/code-reviewer.yaml
name: "Code Reviewer"
goal: "å¤šè¨€èªå¯¾å¿œã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»å“è³ªãƒã‚§ãƒƒã‚¯"
max_tokens: 40000
timeout_seconds: 300

permissions:
  file_read:
    - "./src"
    - "./tests"
  file_write: []
  shell: false
  network: false

tools:
  - "ast_analyzer"
  - "linter"
  - "language_server"

constraints:
  - "unsafe ã‚³ãƒ¼ãƒ‰ç¦æ­¢"
  - "unwrap() ç¦æ­¢ï¼ˆãƒ†ã‚¹ãƒˆä»¥å¤–ï¼‰"
  - "å‹å®‰å…¨æ€§ç¢ºä¿"

languages:
  - "typescript"
  - "python"
  - "rust"
  - "csharp"
```

---

### 7.2 AgentExecutionResult

```rust
#[derive(Debug, Serialize, Deserialize)]
pub struct AgentExecutionResult {
    pub status: AgentExecutionStatus,
    pub tokens_used: usize,
    pub duration_secs: f64,
    pub artifacts: Vec<String>,
    pub message: Option<String>,
    pub error: Option<String>,
}

#[derive(Debug, Serialize, Deserialize)]
pub enum AgentExecutionStatus {
    Success,
    Failed,
    PartialSuccess,
    Timeout,
    BudgetExceeded,
}
```

---

### 7.3 Sourceï¼ˆæ¤œç´¢çµæœï¼‰

```rust
#[derive(Debug, Clone, Serialize, Deserialize)]
pub struct Source {
    pub title: String,
    pub url: String,
    pub snippet: String,
    pub relevance_score: f64,
    pub retrieved_at: DateTime<Utc>,
    pub search_engine: SearchEngine,
}

#[derive(Debug, Clone, Serialize, Deserialize)]
pub enum SearchEngine {
    DuckDuckGo,
    Brave,
    Google,
    Bing,
}
```

---

### 7.4 ResearchReport

```rust
#[derive(Debug, Serialize, Deserialize)]
pub struct ResearchReport {
    pub query: String,
    pub strategy: ResearchStrategy,
    pub depth_reached: usize,
    pub sources: Vec<Source>,
    pub findings: Vec<Finding>,
    pub contradictions: Vec<Contradiction>,
    pub confidence: ConfidenceLevel,
    pub generated_at: DateTime<Utc>,
}

#[derive(Debug, Serialize, Deserialize)]
pub struct Finding {
    pub topic: String,
    pub content: String,
    pub sources: Vec<usize>,  // Source indices
    pub confidence: f64,
}
```

---

## 8. ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹

### 8.1 UC-001: ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Ÿè¡Œ

**ã‚¢ã‚¯ã‚¿ãƒ¼**: é–‹ç™ºè€…  
**å‰ææ¡ä»¶**: codex ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿  
**ãƒˆãƒªã‚¬ãƒ¼**: `codex delegate code-reviewer --scope ./src`

**æ­£å¸¸ãƒ•ãƒ­ãƒ¼**:
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ
2. ã‚·ã‚¹ãƒ†ãƒ ãŒcode-reviewerå®šç¾©ã‚’èª­ã¿è¾¼ã¿
3. ã‚·ã‚¹ãƒ†ãƒ ãŒå¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç‰¹å®šï¼ˆ./srcé…ä¸‹ï¼‰
4. AgentRuntimeãŒæ¨©é™ãƒã‚§ãƒƒã‚¯å®Ÿæ–½
5. ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Ÿè¡Œ
6. ãƒ¬ãƒ“ãƒ¥ãƒ¼çµæœã‚’è¡¨ç¤º
7. artifacts/code-review.md ã‚’ç”Ÿæˆ

**ä»£æ›¿ãƒ•ãƒ­ãƒ¼**:
- 3a. ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿å–ã‚Šæ¨©é™ãªã— â†’ ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
- 5a. ãƒˆãƒ¼ã‚¯ãƒ³ä¸Šé™åˆ°é” â†’ ä¸­æ–­ãƒ»è­¦å‘Šè¡¨ç¤º

**äº‹å¾Œæ¡ä»¶**: ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆå®Œäº†

---

### 8.2 UC-002: Deep Researchå®Ÿè¡Œ

**ã‚¢ã‚¯ã‚¿ãƒ¼**: é–‹ç™ºè€…  
**å‰ææ¡ä»¶**: codex ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿  
**ãƒˆãƒªã‚¬ãƒ¼**: `codex research "Rust async patterns"`

**æ­£å¸¸ãƒ•ãƒ­ãƒ¼**:
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ
2. ã‚·ã‚¹ãƒ†ãƒ ãŒã‚µãƒ–ã‚¯ã‚¨ãƒªç”Ÿæˆ
3. å„ã‚µãƒ–ã‚¯ã‚¨ãƒªã§Webæ¤œç´¢å®Ÿè¡Œï¼ˆDuckDuckGoï¼‰
4. æ¤œç´¢çµæœã‚’é›†ç´„
5. çŸ›ç›¾æ¤œå‡ºå®Ÿè¡Œ
6. ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
7. ãƒ¬ãƒãƒ¼ãƒˆè¡¨ç¤ºãƒ»ä¿å­˜

**ä»£æ›¿ãƒ•ãƒ­ãƒ¼**:
- 3a. DuckDuckGo 202ã‚¨ãƒ©ãƒ¼ â†’ ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè¡Œ
- 4a. æ¤œç´¢çµæœã‚¼ãƒ­ â†’ è­¦å‘Šè¡¨ç¤ºãƒ»ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
- 5a. çŸ›ç›¾æ¤œå‡º â†’ è­¦å‘Šè¡¨ç¤ºãƒ»è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆ

**äº‹å¾Œæ¡ä»¶**: å¼•ç”¨ä»˜ããƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆå®Œäº†

---

### 8.3 UC-003: ãƒ†ã‚¹ãƒˆç”Ÿæˆ

**ã‚¢ã‚¯ã‚¿ãƒ¼**: é–‹ç™ºè€…  
**å‰ææ¡ä»¶**: codex ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿  
**ãƒˆãƒªã‚¬ãƒ¼**: `codex delegate test-gen --scope ./src/api`

**æ­£å¸¸ãƒ•ãƒ­ãƒ¼**:
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ
2. ã‚·ã‚¹ãƒ†ãƒ ãŒtest-genå®šç¾©ã‚’èª­ã¿è¾¼ã¿
3. å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«åˆ†æ
4. ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ç”Ÿæˆ
5. ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
6. ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ

**ä»£æ›¿ãƒ•ãƒ­ãƒ¼**:
- 5a. ãƒ•ã‚¡ã‚¤ãƒ«æ›¸ãè¾¼ã¿æ¨©é™ãªã— â†’ ã‚¨ãƒ©ãƒ¼è¡¨ç¤º

**äº‹å¾Œæ¡ä»¶**: ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ç”Ÿæˆå®Œäº†

---

### 8.4 UC-004: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»

**ã‚¢ã‚¯ã‚¿ãƒ¼**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ‹…å½“è€…  
**å‰ææ¡ä»¶**: codex ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿  
**ãƒˆãƒªã‚¬ãƒ¼**: `codex delegate sec-audit --scope ./backend`

**æ­£å¸¸ãƒ•ãƒ­ãƒ¼**:
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ
2. ã‚·ã‚¹ãƒ†ãƒ ãŒsec-auditå®šç¾©ã‚’èª­ã¿è¾¼ã¿
3. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³å®Ÿè¡Œ
   - SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³æ¤œå‡º
   - XSSæ¤œå‡º
   - CSRFæ¤œå‡º
   - ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆæ¤œå‡º
4. è„†å¼±æ€§ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
5. ä¿®æ­£ææ¡ˆç”Ÿæˆ

**ä»£æ›¿ãƒ•ãƒ­ãƒ¼**:
- 3a. æ·±åˆ»ãªè„†å¼±æ€§æ¤œå‡º â†’ å³åº§ã«è­¦å‘Šè¡¨ç¤º

**äº‹å¾Œæ¡ä»¶**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆå®Œäº†

---

## 9. ãƒ†ã‚¹ãƒˆè¦ä»¶

### 9.1 å˜ä½“ãƒ†ã‚¹ãƒˆ

**ç›®æ¨™ã‚«ãƒãƒ¬ãƒƒã‚¸**: 80%ä»¥ä¸Š

**å¿…é ˆãƒ†ã‚¹ãƒˆé …ç›®**:
```
âœ… AgentRuntime::execute_task()
âœ… PermissionSet::check_file_read()
âœ… TokenBudget::consume()
âœ… WebSearchProvider::search()
âœ… ContradictionChecker::detect_contradictions()
âœ… URLãƒ‡ã‚³ãƒ¼ãƒ€ãƒ¼
```

---

### 9.2 çµ±åˆãƒ†ã‚¹ãƒˆ

**å¿…é ˆãƒ†ã‚¹ãƒˆé …ç›®**:
```
âœ… delegate ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ
âœ… research ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ
âœ… ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©èª­ã¿è¾¼ã¿
âœ… Webæ¤œç´¢å®Ÿè¡Œ
âœ… ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
```

---

### 9.3 E2Eãƒ†ã‚¹ãƒˆ

**å¿…é ˆãƒ†ã‚¹ãƒˆé …ç›®**:
```
âœ… UC-001: ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Ÿè¡Œ
âœ… UC-002: Deep Researchå®Ÿè¡Œ
âœ… UC-003: ãƒ†ã‚¹ãƒˆç”Ÿæˆ
âœ… UC-004: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ç›£æŸ»
```

---

### 9.4 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ

**å¿…é ˆãƒ†ã‚¹ãƒˆé …ç›®**:
```
âœ… delegateèµ·å‹•æ™‚é–“ < 1ç§’
âœ… researchï¼ˆdepth=1ï¼‰ < 5ç§’
âœ… ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ < 500MB
âœ… åŒæ™‚ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œ5å€‹
```

---

## 10. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¦ä»¶

### 10.1 OWASP Top 10å¯¾ç­–

| è„…å¨ | å¯¾ç­– | å®Ÿè£…çŠ¶æ³ |
|------|------|---------|
| **A01: ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®ä¸å‚™** | æ¨©é™ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ  | ğŸš§ è¨­è¨ˆæ¸ˆã¿ |
| **A02: æš—å·åŒ–ã®å¤±æ•—** | APIã‚­ãƒ¼æš—å·åŒ–ä¿å­˜ | âœ… å®Œäº† |
| **A03: ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³** | ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ã‚¯ã‚¨ãƒª | âœ… å®Œäº† |
| **A04: å®‰å…¨ã§ãªã„è¨­è¨ˆ** | ã‚»ã‚­ãƒ¥ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ | âœ… å®Œäº† |
| **A05: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šãƒŸã‚¹** | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå®‰å…¨è¨­å®š | âœ… å®Œäº† |
| **A06: è„†å¼±ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ** | ä¾å­˜é–¢ä¿‚ã‚¹ã‚­ãƒ£ãƒ³ | ğŸš§ æœªå®Ÿè£… |
| **A07: èªè¨¼ã®å¤±æ•—** | OpenAI APIèªè¨¼ | âœ… å®Œäº† |
| **A08: ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã®å¤±æ•—** | ç½²åæ¤œè¨¼ | ğŸš§ æœªå®Ÿè£… |
| **A09: ãƒ­ã‚°ç›£è¦–ã®å¤±æ•—** | æ§‹é€ åŒ–ãƒ­ã‚° | âœ… å®Œäº† |
| **A10: SSRF** | URLæ¤œè¨¼ | ğŸš§ éƒ¨åˆ†å®Ÿè£… |

---

### 10.2 è„†å¼±æ€§ã‚¹ã‚­ãƒ£ãƒ³

**å®šæœŸå®Ÿè¡Œ**:
```bash
# ä¾å­˜é–¢ä¿‚ã‚¹ã‚­ãƒ£ãƒ³
cargo audit

# Clippyï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«ï¼‰
cargo clippy -- -W clippy::suspicious

# Secretæ¤œå‡º
git-secrets --scan
```

---

## 11. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶

### 11.1 ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ç›®æ¨™

| æ©Ÿèƒ½ | ç›®æ¨™ | è¨ˆæ¸¬æ–¹æ³• |
|------|------|---------|
| **DuckDuckGoæ¤œç´¢** | < 2ç§’ | `cargo bench` |
| **URL ãƒ‡ã‚³ãƒ¼ãƒ‰** | < 1ms | `cargo bench` |
| **çŸ›ç›¾æ¤œå‡º** | < 500ms | `cargo bench` |
| **ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ** | < 1ç§’ | `cargo bench` |

---

### 11.2 æœ€é©åŒ–æŒ‡é‡

```
âœ… éåŒæœŸå‡¦ç†ï¼ˆTokioï¼‰
âœ… ä¸¦åˆ—æ¤œç´¢ï¼ˆè¤‡æ•°æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ï¼‰
âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°ï¼ˆæ¤œç´¢çµæœï¼‰
âœ… é…å»¶è©•ä¾¡
âœ… ãƒ¡ãƒ¢ãƒªãƒ—ãƒ¼ãƒ«
```

---

## 12. é‹ç”¨è¦ä»¶

### 12.1 ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
# npmçµŒç”±
npm install -g @openai/codex

# HomebrewçµŒç”±
brew install codex

# ã‚½ãƒ¼ã‚¹ã‹ã‚‰ãƒ“ãƒ«ãƒ‰
git clone https://github.com/zapabob/codex.git
cd codex/codex-rs
cargo build --release
```

---

### 12.2 è¨­å®š

```toml
# ~/.codex/config.toml

[agents]
default_budget = 40000
timeout_seconds = 300

[research]
default_depth = 1
default_breadth = 3
search_engines = ["duckduckgo", "brave"]

[api_keys]
brave_api_key = "YOUR_API_KEY"
google_api_key = "YOUR_API_KEY"
```

---

### 12.3 ç›£è¦–

**ãƒ¡ãƒˆãƒªã‚¯ã‚¹**:
```
- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œå›æ•°
- ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨é‡
- ã‚¨ãƒ©ãƒ¼ç™ºç”Ÿç‡
- å¹³å‡å®Ÿè¡Œæ™‚é–“
- ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡
- CPUä½¿ç”¨ç‡
```

---

### 12.4 ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

**å¯¾è±¡**:
```
- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®šç¾©ï¼ˆ.codex/agents/ï¼‰
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ~/.codex/config.tomlï¼‰
- ç›£æŸ»ãƒ­ã‚°ï¼ˆ~/.codex/logs/ï¼‰
```

---

## 13. åˆ¶ç´„äº‹é …

### 13.1 æŠ€è¡“çš„åˆ¶ç´„

```
âš ï¸ Rust 1.75ä»¥ä¸Šå¿…é ˆ
âš ï¸ Tokioãƒ©ãƒ³ã‚¿ã‚¤ãƒ å¿…é ˆ
âš ï¸ OpenAI APIå¿…é ˆï¼ˆLLMå®Ÿè¡Œï¼‰
âš ï¸ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šå¿…é ˆï¼ˆWebæ¤œç´¢ï¼‰
```

---

### 13.2 ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¶ç´„

```
âœ… macOS (ARM/x86_64)
âœ… Linux (x86_64/ARM64)
âœ… Windows (x86_64)
âŒ iOS/Androidï¼ˆPhase 2ä»¥é™ï¼‰
```

---

### 13.3 ãƒ©ã‚¤ã‚»ãƒ³ã‚¹åˆ¶ç´„

```
âœ… Apache-2.0 License
âœ… å•†ç”¨åˆ©ç”¨å¯èƒ½
âœ… æ”¹å¤‰å¯èƒ½
âœ… å†é…å¸ƒå¯èƒ½
```

---

### 13.4 ã‚³ã‚¹ãƒˆåˆ¶ç´„

```
ğŸ’° DuckDuckGo: $0ï¼ˆç„¡æ–™ï¼‰
ğŸ’° Brave Search: $0ã€œï¼ˆæœˆ2000ã‚¯ã‚¨ãƒªç„¡æ–™ï¼‰
ğŸ’° Google Custom Search: $5/1000ã‚¯ã‚¨ãƒª
ğŸ’° OpenAI API: å¾“é‡èª²é‡‘
```

---

## 14. ç”¨èªé›†

| ç”¨èª | å®šç¾© |
|------|------|
| **ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ** | å°‚é–€ã‚¿ã‚¹ã‚¯ã‚’è‡ªå¾‹çš„ã«å®Ÿè¡Œã™ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ |
| **Deep Research** | å¤šæ®µéšæ¢ç´¢ãƒ»çŸ›ç›¾æ¤œå‡ºã‚’å‚™ãˆãŸé«˜åº¦ãªæƒ…å ±åé›†æ©Ÿèƒ½ |
| **Agent Runtime** | ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å®Ÿè¡Œç’°å¢ƒ |
| **Token Budget** | LLMä½¿ç”¨ãƒˆãƒ¼ã‚¯ãƒ³æ•°ã®ä¸Šé™ |
| **Permission Set** | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®æ¨©é™ã‚»ãƒƒãƒˆ |
| **Research Provider** | Webæ¤œç´¢æ©Ÿèƒ½ã®æä¾›ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ |
| **Contradiction Checker** | çŸ›ç›¾æ¤œå‡ºå™¨ |
| **Source** | æ¤œç´¢çµæœã®æƒ…å ±æº |
| **Artifact** | ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè¡Œçµæœã®æˆæœç‰© |
| **MCP** | Model Context Protocolï¼ˆãƒ„ãƒ¼ãƒ«çµ±åˆè¦æ ¼ï¼‰ |

---

## 15. ä»˜éŒ²

### 15.1 å‚è€ƒæ–‡çŒ®

1. OpenAI/codex Documentation: https://github.com/openai/codex
2. Rust Book: https://doc.rust-lang.org/book/
3. Tokio Documentation: https://tokio.rs/
4. MCP Specification: https://modelcontextprotocol.io/

---

### 15.2 é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- `.codex/META_PROMPT_CONTINUOUS_IMPROVEMENT.md` - é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³
- `docs/codex-subagents-deep-research.md` - è©³ç´°è¨­è¨ˆ
- `_docs/2025-10-11_å…¨æ©Ÿèƒ½å®Œå…¨å®Ÿè£…å®Œäº†å ±å‘Š.md` - å®Ÿè£…å®Œäº†å ±å‘Š
- `README.md` - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

---

### 15.3 æ‰¿èª

| å½¹å‰² | æ°å | æ‰¿èªæ—¥ | ç½²å |
|------|------|--------|------|
| **ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã‚ªãƒ¼ãƒŠãƒ¼** | zapabob | 2025-10-11 | _______ |
| **é–‹ç™ºãƒªãƒ¼ãƒ‰** | zapabob | 2025-10-11 | _______ |
| **QAãƒªãƒ¼ãƒ‰** | Community | - | _______ |

---

**æ–‡æ›¸ç•ªå·**: REQ-SPEC-001  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
**ä½œæˆæ—¥**: 2025-10-11 JST  
**æœ€çµ‚æ›´æ–°**: 2025-10-11 JST  
**Status**: âœ… **æ‰¿èªæ¸ˆã¿**

---

**END OF REQUIREMENTS SPECIFICATION**

